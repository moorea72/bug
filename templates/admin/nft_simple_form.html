{% extends "admin/base.html" %}

{% block title %}{{ title }} - Admin Panel{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
    <div class="max-w-2xl mx-auto">
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">{{ title }}</h2>
            
            <form method="POST" enctype="multipart/form-data" class="space-y-4">
                {{ form.hidden_tag() }}
                
                <!-- Collection Selection -->
                <div>
                    {{ form.collection_id.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                    {{ form.collection_id(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                    {% if form.collection_id.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ form.collection_id.errors[0] }}</p>
                    {% endif %}
                </div>
                
                <!-- NFT Name -->
                <div>
                    {{ form.name.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                    {{ form.name(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                    {% if form.name.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ form.name.errors[0] }}</p>
                    {% endif %}
                </div>
                
                <!-- Image Upload -->
                <div>
                    {{ form.image_file.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                    {{ form.image_file(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                    {% if form.image_file.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ form.image_file.errors[0] }}</p>
                    {% endif %}
                    {% if nft and nft.image_url %}
                        <div class="mt-2">
                            <p class="text-sm text-gray-600">Current Image:</p>
                            <img src="{{ nft.image_url }}" alt="Current NFT" class="w-32 h-32 object-cover rounded-md mt-1">
                        </div>
                    {% endif %}
                </div>
                
                <!-- Price -->
                <div>
                    {{ form.price.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                    {{ form.price(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                    {% if form.price.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ form.price.errors[0] }}</p>
                    {% endif %}
                </div>
                
                <!-- Blue Tick -->
                <div class="flex items-center">
                    {{ form.is_verified(class="mr-2") }}
                    {{ form.is_verified.label(class="text-sm font-medium text-gray-700") }}
                </div>
                
                <!-- Blue Tick PNG Upload -->
                <div>
                    {{ form.blue_tick_file.label(class="block text-sm font-medium text-gray-700 mb-2") }}
                    {{ form.blue_tick_file(class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500") }}
                    {% if form.blue_tick_file.errors %}
                        <p class="text-red-500 text-sm mt-1">{{ form.blue_tick_file.errors[0] }}</p>
                    {% endif %}
                    {% if nft and nft.blue_tick_url %}
                        <div class="mt-2">
                            <p class="text-sm text-gray-600">Current Blue Tick:</p>
                            <img src="{{ nft.blue_tick_url }}" alt="Current Blue Tick" class="w-16 h-16 object-cover rounded-md mt-1">
                        </div>
                    {% endif %}
                </div>
                
                <!-- Active Status -->
                <div class="flex items-center">
                    {{ form.is_active(class="mr-2") }}
                    {{ form.is_active.label(class="text-sm font-medium text-gray-700") }}
                </div>
                
                <!-- Submit Buttons -->
                <div class="flex space-x-4 pt-4">
                    <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        {% if nft %}Update NFT{% else %}Add NFT{% endif %}
                    </button>
                    <a href="{{ url_for('admin_nfts_enhanced') }}" class="bg-gray-600 text-white px-6 py-2 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500">
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}